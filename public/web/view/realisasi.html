<div class="padding-elem"></div>
<div id="realisasi">
        <div class="table-100">
                <div class="row">
                        <div class="col-sm-3">{{ employee.role.name}}</div>
                        <div class="col-sm-2">: {{employee.name}}</div>
                        <div class="col-sm-4">当月考核期 Periode bulan berjalan</div>
                        <div class="col-sm-3">: {{ pb.start }} - {{ pb.end }}</div>
                </div>
                <div class="row" style="margin-top:10px;">
                        <div class="col-sm-3">{{ atasan.role.name}}</div>
                        <div class="col-sm-2">: {{ atasan.name}}</div>
                        <div class="col-sm-4">当月累计考核期 Periode Kumulatif sampai bulan berjalan</div>
                        <div class="col-sm-3">: {{ pb.startB }} - {{ pb.endB }}</div>
                </div>


        </div>
    <div class="table-100">
        <p class="bold table-title">
            <md-menu ng-hide="hasEndorse">
                <span class="glyphicon glyphicon-option-vertical" ng-click="openMenu($mdMenu,$event)"></span>
                <md-menu-content class="md-dense" width="3">
                    <md-menu-item>
                        <md-button ng-click="addRow()" ng-disabled="hasChanged || dlt_result.toogle_delete">
                            <span class="glyphicon glyphicon-plus"></span>  Tambah Baris
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-click="toogleDelete(dlt_result)" ng-disabled="hasChanged">
                            <span class="glyphicon glyphicon-minus"></span> {{dlt_result.dlt_message}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-divider></md-menu-divider>
                    <md-menu-item>
                        <md-button ng-click="copyData()">
                            <span class="glyphicon glyphicon-copy"></span>    Salin
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-click="pasteData()">
                            <span class="glyphicon glyphicon-paste"></span>    Tempel
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-click="undoData()">
                            <span class="glyphicon glyphicon-chevron-left"></span>    Batal
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-click="redoData()">
                            <span class="glyphicon glyphicon-chevron-right"></span>    Balik
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>

        1. Sasaran Hasil {{ header.weight_result?(header.weight_result*100)+'%':'' }}
        </p>
        <table class="table realisasi-table">
                <thead>
                        <tr>
                            <th class="f-column-num f-column" rowspan="2">序号 No.</th>
                            <th class="kpi f-column" rowspan="2">绩效考核关键指标 Key Performance Indicator</th>
                            <th class="f-column" rowspan="2">单位 Unit</th>
                            <th colspan="2">2019年责任权重 Performance Wighing 2019</th>
                            <th colspan="4" class="top-column">2019年绩效目标 Performance Target 2019</th>
                            <th colspan="4" class="top-column">2019年实行情况 Realization 2019</th>
                            <th colspan="2">2019年绩效考核指标完成率 KPI Achievement 2019</th>
                            <th colspan="2">年绩效考核指标完成率 x 年责任权重 Achievement x Weighing</th>
                        </tr>
                        <tr>
                            <th ng-repeat="h in headerLabel track by $index" ng-class="getHeaderColor($index)">{{h}}</th>
                        </tr>
                    </thead>
                    <tbody>
                            <tr ng-repeat="d in data track by $index" ng-init="c_index=0;outerIndex=$index">
                                <td class="num"><span ng-if="!dlt_result.toogle_delete">{{$index+1}}</span><button class="btn btn-danger" ng-if="dlt_result.toogle_delete" ng-click="deleteRow($index)">X</button></td>
                                <td class="kpi" belong-to="d.name" after-edit="setKPI" contenteditable="{{d.name_contentEditable}}" data-flag="name"
                                on-data-paste="dataPaste" on-data-copy="dataCopy" on-data-escaped="dataEscaped" on-data-selected="dataSelected"
                                notify-g-label="realisasi-content:kpi-{{outerIndex}}" ng-class="d.kpiColor" i-index="name" c-index="{{c_index}}" d-index="{{$index}}"></td>

                                <td class="center-text" belong-to="d.unit" after-edit="setDataFilter" contenteditable="{{d.unit_contentEditable}}" data-flag="unit"
                                on-data-paste="dataPaste" on-data-copy="dataCopy" on-data-escaped="dataEscaped" on-data-selected="dataSelected"
                                notify-g-label="realisasi-content:unit-{{outerIndex}}" ng-class="d.unitColor" i-index="unit" c-index="{{c_index+1}}" d-index="{{$index}}"></td>

                                <td ng-repeat="i in pw_indices" belong-to="d[i]" data-flag="pw"
                                on-data-paste="dataPaste" on-data-copy="dataCopy" on-data-escaped="dataEscaped" on-data-selected="dataSelected"
                                contenteditable="{{d.pw_contentEditable}}" c-index="{{c_index+2+$index}}" i-index="{{i}}"
                                auto-fill="true" sanitize="{{d.pw_sanitize}}" format="{{d.pw_filter}}" ng-class="d.pw['bColor'+(i+1)]"
                                 after-edit="setBColor|setTotalW" notify-g-label="realisasi-content:pw-{{outerIndex}}-{{i}}" d-index="{{$parent.$index}}"></td>

                                <td ng-repeat="i in pt_indices" belong-to="d[i]" data-flag="pt" on-data-paste="dataPaste" on-data-copy="dataCopy"
                                on-data-escaped="dataEscaped" on-data-selected="dataSelected" ng-class="d.pt['bColor'+(i+1)]"
                                contenteditable="{{d.pt_contentEditable}}" auto-fill="true" sanitize="{{d.pt_sanitize}}" i-index="{{i}}"
                                format="{{d.pt_filter}}" after-edit="setBColor" notify-g-label="realisasi-content:pt-{{outerIndex}}-{{i}}"
                                d-index="{{$parent.$index}}" c-index="{{c_index+4+$index}}" ></td>

                                <td ng-repeat="i in real_indices" belong-to="d[i]" data-flag="real" on-data-paste="dataPaste" on-data-copy="dataCopy"
                                on-data-escaped="dataEscaped" on-data-selected="dataSelected" ng-class="d.real['bColor'+(i+1)]"
                                contenteditable="{{d.real_contentEditable}}" auto-fill="true" sanitize="{{d.real_sanitize}}" i-index="{{i}}"
                                format="{{d.real_filter}}" c-index="{{c_index+8+$index}}" after-edit="setBColor" notify-g-label="realisasi-content:real-{{outerIndex}}-{{i}}"
                                d-index="{{$parent.$index}}"></td>


                                <td ng-repeat="i in kpia_indices" belong-to="d[i]" data-flag="kpia" on-data-paste="dataPaste"
                                on-data-escaped="dataEscaped" on-data-selected="dataSelected" ng-class="d['bColor_'+i]"
                                contenteditable="{{d.kpia_contentEditable}}" auto-fill="true" sanitize="{{d.kpia_sanitize}}"
                                format="{{d.kpia_filter}}" after-edit="setBColor" notify-g-label="realisasi-content:kpia-{{outerIndex}}-{{i}}"
                                d-index="{{$parent.$index}}"></td>

                                <td ng-repeat="i in aw_indices" belong-to="d[i]" data-flag="aw" on-data-paste="dataPaste"
                                on-data-escaped="dataEscaped" on-data-selected="dataSelected"
                                contenteditable="{{d.aw_contentEditable}}" auto-fill="true" sanitize="{{d.aw_sanitize}}"
                                format="{{d.aw_filter}}" after-edit="setBColor" notify-g-label="realisasi-content:aw-{{outerIndex}}-{{i}}"
                                d-index="{{$parent.$index}}"></td>
                            </tr>
                            <tr>
                                <td class="num"></td>
                                <td colspan="3" class="center-text bold">责任权重总数 TOTAL BOBOT :</td>
                                <td ng-repeat="i in [] |range:2" notify-g-label="add-content">{{totalW[i]}}%</td>
                                <td colspan="7"></td>
                                <td colspan="2" class="right-text bold">Total Achievement: </td>
                                <td class="center-text" notify-g-label="add-content" belong-to="totalAchieveMent.t1"></td>
                                <td class="center-text" notify-g-label="add-content" belong-to="totalAchieveMent.t2"></td>
                            </tr>
                            <tr>
                                <td class="num"></td>
                                <td colspan="12"></td>
                                <td colspan="2" class="right-text bold">Index:</td>
                                <td class="center-text" notify-g-label="add-content" belong-to="IndexAchieveMent.t1"></td>
                                <td class="center-text" notify-g-label="add-content" belong-to="IndexAchieveMent.t2"></td>
                            </tr>
                    </tbody>
        </table>
        <div flex="30">
                <button class="btn btn-danger" ng-hide="hasEndorse || !dlt_result.toogle_delete" ng-click="toogleDelete(dlt_result)" ng-disabled="hasChanged">{{dlt_result.dlt_message}}</button>
        </div>

        <div>{{changedMessage}}</div>

        <p class="bold table-title">
                <md-menu ng-hide="hasEndorse">
                        <span class="glyphicon glyphicon-option-vertical" ng-click="openMenu($mdMenu,$event)"></span>
                        <md-menu-content class="md-dense" width="3">
                            <md-menu-item>
                                <md-button ng-click="addPRow()" ng-disabled="hasChanged || dlt_process.toogle_delete">
                                    <span class="glyphicon glyphicon-plus"></span>  Tambah Baris
                                </md-button>
                            </md-menu-item>
                            <md-menu-item>
                                <md-button ng-click="toogleDelete(dlt_process)" ng-disabled="hasChanged">
                                    <span class="glyphicon glyphicon-minus"></span> {{dlt_process.dlt_message}}
                                </md-button>
                            </md-menu-item>
                            <md-menu-divider></md-menu-divider>
                            <md-menu-item>
                                <md-button ng-click="copyDataP()">
                                    <span class="glyphicon glyphicon-copy"></span>    Salin
                                </md-button>
                            </md-menu-item>
                            <md-menu-item>
                                <md-button ng-click="pasteDataP()">
                                    <span class="glyphicon glyphicon-paste"></span>    Tempel
                                </md-button>
                            </md-menu-item>
                            <md-menu-item>
                                <md-button ng-click="undoDataP()">
                                    <span class="glyphicon glyphicon-chevron-left"></span>    Batal
                                </md-button>
                            </md-menu-item>
                            <md-menu-item>
                                <md-button ng-click="redoDataP()">
                                    <span class="glyphicon glyphicon-chevron-right"></span>    {{dlt_process.dlt_message}}
                                </md-button>
                            </md-menu-item>
                        </md-menu-content>
                    </md-menu>
            2. Sasaran Proses {{ header.weight_process?(header.weight_process*100)+'%':'' }}
        </p>
        <table class="table realisasi-table">
                <thead>
                        <tr>
                            <th class="f-column f-column-num" rowspan="2">序号 No.</th>
                            <th class="kpi-process f-column" rowspan="2">核心竞争力 Kompetensi Inti</th>
                            <th class="f-column" rowspan="2">单位 Unit</th>
                            <th colspan="2">2019年责任权重 Performance Wighing 2019</th>
                            <th colspan="2" class="top-column">2019年绩效目标 Performance Target 2019</th>
                            <th colspan="2" class="top-column">2019年实行情况 Realization 2019</th>
                            <th colspan="2">2019年绩效考核指标完成率 KPI Achievement 2019</th>
                            <th colspan="2">年绩效考核指标完成率 x 年责任权重 Achievement x Weighing</th>
                        </tr>
                        <tr>
                            <th ng-repeat="h in headerLabelProcess track by $index" ng-class="getHeaderColor($index)">{{h}}</th>
                        </tr>
                    </thead>
                    <tbody>
                            <tr ng-repeat="p in kpiprocesses">
                                 <td class="num"><span ng-if="!dlt_process.toogle_delete">{{$index+1}}</span><button class="btn btn-danger" ng-if="dlt_process.toogle_delete" ng-click="deleteRowP($index,false)">X</button></td>
                                 <td class="kpi-process" d-index="{{$index}}"  belong-to="p.name" auto-fill="true" contenteditable="false"></td>
                                 <td belong-to="p.unit" d-index="{{$index}}" on-data-paste="dataPasteP" on-data-escaped="dataEscapedP" on-data-copy="dataCopyP" notify-g-label="realisasi-content" on-data-selected="dataSelectedP" c-index="0" auto-fill="true" contenteditable="{{p.contentEditable.unit}}"></td>
                                 <td belong-to="p.pw_1" after-edit="setBColorP|setTotalW_P" on-data-paste="dataPasteP" d-index="{{$index}}" on-data-escaped="dataEscapedP" notify-g-label="realisasi-content" on-data-copy="dataCopyP" on-data-selected="dataSelectedP"  c-index="1" data-flag="pw" format="{{p.pw_filter}}" auto-fill="true" contenteditable="{{p.contentEditable.pw_1}}"></td>
                                 <td belong-to="p.pw_2" after-edit="setBColorP|setTotalW_P" on-data-paste="dataPasteP" d-index="{{$index}}" on-data-escaped="dataEscapedP" notify-g-label="realisasi-content" on-data-copy="dataCopyP" on-data-selected="dataSelectedP" c-index="2" data-flag="pw" format="{{p.pw_filter}}" auto-fill="true" contenteditable="{{p.contentEditable.pw_2}}"></td>
                                 <td belong-to="p.pt_1" after-edit="setBColorP" on-data-paste="dataPasteP" d-index="{{$index}}" on-data-escaped="dataEscapedP" notify-g-label="realisasi-content" on-data-copy="dataCopyP" on-data-selected="dataSelectedP" c-index="3" auto-fill="true" data-flag="pt" contenteditable="{{p.contentEditable.pt_1}}"></td>
                                 <td belong-to="p.pt_2" after-edit="setBColorP" on-data-paste="dataPasteP" d-index="{{$index}}" on-data-escaped="dataEscapedP" notify-g-label="realisasi-content" on-data-copy="dataCopyP" on-data-selected="dataSelectedP" c-index="4" auto-fill="true" data-flag="pt" contenteditable="{{p.contentEditable.pt_2}}"></td>
                                 <td belong-to="p.real_1" after-edit="setBColorP" on-data-paste="dataPasteP" d-index="{{$index}}" on-data-escaped="dataEscapedP" notify-g-label="realisasi-content" on-data-copy="dataCopyP" on-data-selected="dataSelectedP" c-index="5" auto-fill="true" data-flag="real" contenteditable="{{p.contentEditable.real_1}}"></td>
                                 <td belong-to="p.real_2" after-edit="setBColorP" on-data-paste="dataPasteP" d-index="{{$index}}" on-data-escaped="dataEscapedP" notify-g-label="realisasi-content" on-data-copy="dataCopyP" on-data-selected="dataSelectedP"  c-index="6" auto-fill="true" data-flag="real" contenteditable="{{p.contentEditable.real_2}}"></td>
                                 <td belong-to="p.kpia_1" ng-class="p.bColor_kpia_1" on-data-paste="dataPasteP" auto-fill="true" data-flag="kpia" notify-g-label="realisasi-content" format="{{p.kpia_filter}}" contenteditable="{{p.contentEditable.kpia_1}}"></td>
                                 <td belong-to="p.kpia_2" ng-class="p.bColor_kpia_2" on-data-paste="dataPasteP" auto-fill="true" data-flag="kpia" notify-g-label="realisasi-content" format="{{p.kpia_filter}}" contenteditable="{{p.contentEditable.kpia_2}}"></td>
                                 <td belong-to="p.aw_1" auto-fill="true" data-flag="aw" on-data-paste="dataPasteP" notify-g-label="realisasi-content" contenteditable="{{p.contentEditable.aw_1}}" format="{{p.aw_filter}}"></td>
                                 <td belong-to="p.aw_2"auto-fill="true" data-flag="aw" on-data-paste="dataPasteP" notify-g-label="realisasi-content" contenteditable="{{p.contentEditable.aw_2}}" format="{{p.aw_filter}}"></td>
                            </tr>
                                <tr>
                                    <td class="num"></td>
                                    <td class="kpi-process bold">责任权重总数 TOTAL BOBOT :</td>
                                    <!-- <td class="center-text bold"></td> -->
                                    <td></td>
                                    <td ng-repeat="i in [] |range:2">{{totalW_P[i]}}%</td>
                                    <td colspan="4"></td>
                                    <td colspan="2" class="right-text bold">Total Achievement: </td>
                                    <td notify-g-label="add-content" belong-to="totalAchieveMentP.t1"></td>
                                    <td notify-g-label="add-content" belong-to="totalAchieveMentP.t2" ></td>
                                </tr>
                                <tr>
                                    <td class="num"></td>
                                    <td colspan="9"></td>
                                    <td colspan="2" class="right-text bold">Index:</td>
                                    <td notify-g-label="add-content" belong-to="IndexAchieveMentP.t1"></td>
                                    <td notify-g-label="add-content" belong-to="IndexAchieveMentP.t2"></td>
                                </tr>

                    </tbody>
        </table>

        <div flex="30">
                <button class="btn btn-danger" ng-hide="hasEndorse || !dlt_process.toogle_delete " ng-click="toogleDelete(dlt_process)" ng-disabled="hasChanged">{{dlt_process.dlt_message}}</button>
                <br>
                <button class="btn btn-success save-change-btn" ng-hide="hasEndorse" ng-click="saveChanged()" ng-disabled="hasChanged || toogle_delete">Simpan Perubahan</button>
        </div>

        <div class="col-sm-12 footer-pengesahan">
            <div class="row pengesahan-header">
                    <div class="col-sm-6">
                            <p class="bold">Pengesahan</p>
                        </div>
                    <div class="col-sm-6">
                            <p ng-bind-html="aggrementStr" class="blue-font bold right-text"></p>
                    </div>
            </div>


            <div class="col-sm-12">
                <div ng-repeat="endorse in kpiendorsements" ng-class="$index===0?'pengesahan1':''" class="col-sm-4">
                    {{ endorse.employee.role.name}}:
                    <input type="checkbox" ng-change="!isEndorseDisable(endorse)?setEndorse(endorse):null" ng-disabled="isEndorseDisable(endorse)" ng-model="aggrements[endorse.id]">
                </div>
            </div>
            <div class="col-sm-12 tanda-tangan"></div>
            <div class="col-sm-12">
                <div ng-repeat="endorse in kpiendorsements" ng-class="{'blue-check':aggrements[endorse.id],'pengesahan1':$index===0}" class="col-sm-4">
                    {{ endorse.employee.name}}
                </div>
            </div>

        </div>

    </div>


</div>
